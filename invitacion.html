<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Â¡Acceso Concedido! - Oliver's Party</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    
    <style>
        /* ESTILOS DEL "TELÃ“N" PARA IPHONE */
        #ios-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.95);
            z-index: 1000; /* Por encima de todo */
            display: flex; /* Se usa flex para centrar */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            transition: opacity 0.5s;
        }

        .hidden-overlay {
            opacity: 0;
            pointer-events: none;
            display: none !important;
        }

        #music-control {
            position: fixed; bottom: 20px; right: 20px;
            background: var(--accent-red); color: white;
            border: 2px solid black; border-radius: 50%;
            width: 50px; height: 50px; font-size: 1.5rem;
            cursor: pointer; z-index: 100;
            display: flex; justify-content: center; align-items: center;
            box-shadow: 3px 3px 0px black;
        }
    </style>
</head>
<body>

    <audio id="bg-music" loop preload="auto">
        <source src="assets/musica.mp3" type="audio/mpeg">
    </audio>

    <div id="ios-overlay">
        <h1 class="main-title" style="font-size: 2.5rem; margin-bottom: 20px;">Â¡GANASTE! ğŸ†</h1>
        <p class="details">Tu invitaciÃ³n estÃ¡ lista</p>
        <button id="unlock-btn" class="btn-party" style="font-size: 1.2rem; padding: 15px 40px;">
            ABRIR SOBRE ğŸ“©
        </button>
    </div>

    <div id="music-control">ğŸ”‡</div>

    <div class="music-bg">
        <span>ğŸµ</span><span>âš½</span><span>ğŸŠ</span><span>ğŸ</span>
        <span>ğŸ¹</span><span>ğŸ</span><span>ğŸµ</span><span>ğŸ¼</span>
        <span>ğŸ</span><span>âš½</span><span>ğŸµ</span><span>ğŸŠ</span>
        <span>ğŸ¹</span><span>ğŸ¼</span><span>ğŸ</span><span>ğŸµ</span>
    </div>

    <div class="win-card-style">
        <h2 class="script-title-small">Â¡Acceso Concedido!</h2>
        <h1 class="main-title-small">OLIVER'S PARTY</h1>
        <p class="subtitle-bold" style="color: var(--accent-red);">FÃšTBOL | POOL PARTY</p>
        
        <div class="info-box">
            <p class="big-date">SÃBADO 28 FEB | 16:00 PM</p>
            <p class="address">ğŸ“ Calle Lago Valencia 157.<br>Rinconada del Lago, La Molina</p>
        </div>

        <div class="dont-forget">
            <p class="script-subtitle">No olvides:</p>
            <div class="icons-row">
                <div class="icon-item">ğŸ‘•<br><span>FÃºtbol</span></div>
                <div class="icon-item">ğŸ©³<br><span>Piscina</span></div>
                <div class="icon-item">ğŸ<br><span>Regalo</span></div>
                <div class="icon-item">ğŸ¾<br><span>Trago</span></div>
            </div>
        </div>

        <a href="index.html" class="btn-party small" style="text-decoration: none; display: inline-block; margin-top: 20px;">
            JUGAR OTRA VEZ
        </a>
    </div>

    <script>
        window.addEventListener('load', () => {
            const audio = document.getElementById('bg-music');
            const btn = document.getElementById('music-control');
            const overlay = document.getElementById('ios-overlay');
            const unlockBtn = document.getElementById('unlock-btn');
            
            // --- TUS TIEMPOS ---
            const startSeconds = 117; // 1:57
            const endSeconds = 146;   // 2:26
            
            // Configurar Audio
            audio.currentTime = startSeconds;
            audio.volume = 0.5;

            // LÃ³gica del Bucle
            audio.addEventListener('timeupdate', () => {
                if (audio.currentTime >= endSeconds) {
                    audio.currentTime = startSeconds;
                    audio.play();
                }
            });

            // FunciÃ³n para iniciar mÃºsica y quitar el telÃ³n
            const startParty = () => {
                // Asegurar tiempo
                if(audio.currentTime < startSeconds || audio.currentTime > endSeconds) {
                    audio.currentTime = startSeconds;
                }
                
                audio.play().then(() => {
                    // Si funcionÃ³:
                    btn.textContent = "ğŸ”Š";
                    overlay.classList.add('hidden-overlay'); // Ocultar telÃ³n suavemente
                }).catch((e) => {
                    // Si fallÃ³ (iPhone bloqueado):
                    console.log("Esperando interacciÃ³n del usuario...");
                    // No hacemos nada, el telÃ³n se queda visible esperando el clic
                });
            };

            // INTENTO AUTOMÃTICO (Para Android/PC)
            startParty();

            // PLAN B: BOTÃ“N MANUAL (Para iPhone)
            unlockBtn.addEventListener('click', () => {
                startParty();
            });

            // BotÃ³n de Mute flotante
            btn.addEventListener('click', (e) => {
                if (audio.paused) {
                    startParty();
                } else {
                    audio.pause();
                    btn.textContent = "ğŸ”‡";
                }
            });
        });
    </script>

</body>
</html>